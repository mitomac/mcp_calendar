<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" rx="10" ry="10" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#333333">Duke MCP Architecture</text>
  
  <!-- External APIs Box -->
  <rect x="50" y="80" width="700" height="80" rx="5" ry="5" fill="#e6f2ff" stroke="#0066cc" stroke-width="2" />
  <text x="400" y="110" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#0066cc">External Duke APIs</text>
  
  <!-- External API Icons -->
  <rect x="100" y="130" width="120" height="20" rx="3" ry="3" fill="#ffffff" stroke="#0066cc" stroke-width="1" />
  <text x="160" y="145" font-family="Arial" font-size="12" text-anchor="middle" fill="#0066cc">Calendar API</text>
  
  <rect x="340" y="130" width="120" height="20" rx="3" ry="3" fill="#ffffff" stroke="#0066cc" stroke-width="1" />
  <text x="400" y="145" font-family="Arial" font-size="12" text-anchor="middle" fill="#0066cc">Directory API</text>
  
  <rect x="580" y="130" width="120" height="20" rx="3" ry="3" fill="#ffffff" stroke="#0066cc" stroke-width="1" />
  <text x="640" y="145" font-family="Arial" font-size="12" text-anchor="middle" fill="#0066cc">Scholars API</text>

  <!-- MCP Server Box -->
  <rect x="50" y="190" width="700" height="230" rx="5" ry="5" fill="#f0f5e6" stroke="#5cb85c" stroke-width="2" />
  <text x="400" y="215" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#5cb85c">Duke MCP Server</text>

  <!-- Connection lines from External APIs to MCP Components -->
  <line x1="160" y1="150" x2="160" y2="240" stroke="#0066cc" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="400" y1="150" x2="400" y2="240" stroke="#0066cc" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="640" y1="150" x2="640" y2="240" stroke="#0066cc" stroke-width="2" stroke-dasharray="5,3" />
  
  <!-- MCP Component Boxes -->
  <rect x="100" y="240" width="120" height="150" rx="5" ry="5" fill="#ffffff" stroke="#5cb85c" stroke-width="2" />
  <text x="160" y="265" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#5cb85c">Calendar MCP</text>
  <rect x="110" y="280" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="160" y="297" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">Models</text>
  <rect x="110" y="315" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="160" y="332" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">MCP Class</text>
  <rect x="110" y="350" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="160" y="367" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">API Routes</text>
  
  <!-- Cache for Calendar -->
  <circle cx="85" cy="315" r="15" fill="#ffb3b3" stroke="#cc0000" stroke-width="1.5" />
  <text x="85" y="320" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#cc0000">C</text>
  <text x="55" y="305" font-family="Arial" font-size="9" font-weight="bold" text-anchor="middle" fill="#cc0000">Cache</text>
  <line x1="85" y1="300" x2="110" y2="315" stroke="#cc0000" stroke-width="1.5" stroke-dasharray="2,1" />
  
  <rect x="340" y="240" width="120" height="150" rx="5" ry="5" fill="#ffffff" stroke="#5cb85c" stroke-width="2" />
  <text x="400" y="265" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#5cb85c">Directory MCP</text>
  <rect x="350" y="280" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="400" y="297" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">Models</text>
  <rect x="350" y="315" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="400" y="332" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">MCP Class</text>
  <rect x="350" y="350" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="400" y="367" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">API Routes</text>
  
  <!-- Cache for Directory -->
  <circle cx="325" cy="315" r="15" fill="#ffb3b3" stroke="#cc0000" stroke-width="1.5" />
  <text x="325" y="320" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#cc0000">C</text>
  <text x="295" y="305" font-family="Arial" font-size="9" font-weight="bold" text-anchor="middle" fill="#cc0000">Cache</text>
  <line x1="325" y1="300" x2="350" y2="315" stroke="#cc0000" stroke-width="1.5" stroke-dasharray="2,1" />
  
  <rect x="580" y="240" width="120" height="150" rx="5" ry="5" fill="#ffffff" stroke="#5cb85c" stroke-width="2" />
  <text x="640" y="265" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#5cb85c">Scholars MCP</text>
  <rect x="590" y="280" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="640" y="297" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">Models</text>
  <rect x="590" y="315" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="640" y="332" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">MCP Class</text>
  <rect x="590" y="350" width="100" height="25" rx="3" ry="3" fill="#f0f5e6" stroke="#5cb85c" stroke-width="1" />
  <text x="640" y="367" font-family="Arial" font-size="10" text-anchor="middle" fill="#5cb85c">API Routes</text>
  
  <!-- Cache for Scholars -->
  <circle cx="565" cy="315" r="15" fill="#ffb3b3" stroke="#cc0000" stroke-width="1.5" />
  <text x="565" y="320" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#cc0000">C</text>
  <text x="535" y="305" font-family="Arial" font-size="9" font-weight="bold" text-anchor="middle" fill="#cc0000">Cache</text>
  <line x1="565" y1="300" x2="590" y2="315" stroke="#cc0000" stroke-width="1.5" stroke-dasharray="2,1" />
  
  <!-- Cache Explanation -->
  <rect x="260" y="190" width="280" height="35" rx="5" ry="5" fill="#ffecec" stroke="#cc0000" stroke-width="1" />
  <text x="400" y="210" font-family="Arial" font-size="11" text-anchor="middle" fill="#cc0000">Time-based caching reduces API calls to Duke services</text>

  <!-- Dependency Arrow from Scholars to Directory -->
  <path d="M580,320 L460,320" stroke="#ff9900" stroke-width="2" fill="none" marker-end="url(#arrow)" />
  <text x="520" y="315" font-family="Arial" font-size="10" text-anchor="middle" fill="#ff9900">Uses for DUID lookup</text>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ff9900" />
    </marker>
  </defs>
  
  <!-- Native Functions Box -->
  <rect x="50" y="450" width="700" height="80" rx="5" ry="5" fill="#fff2e6" stroke="#ff9900" stroke-width="2" />
  <text x="400" y="475" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#ff9900">Native Function Integrations</text>
  
  <!-- OpenWebUI Tool Boxes -->
  <rect x="100" y="490" width="120" height="30" rx="3" ry="3" fill="#ffffff" stroke="#ff9900" stroke-width="1" />
  <text x="160" y="510" font-family="Arial" font-size="12" text-anchor="middle" fill="#ff9900">Calendar Tool</text>
  
  <rect x="340" y="490" width="120" height="30" rx="3" ry="3" fill="#ffffff" stroke="#ff9900" stroke-width="1" />
  <text x="400" y="510" font-family="Arial" font-size="12" text-anchor="middle" fill="#ff9900">Directory Tool</text>
  
  <rect x="580" y="490" width="120" height="30" rx="3" ry="3" fill="#ffffff" stroke="#ff9900" stroke-width="1" />
  <text x="640" y="510" font-family="Arial" font-size="12" text-anchor="middle" fill="#ff9900">Scholars Tool</text>
  
  <!-- Connection lines from MCP Components to OpenWebUI Tools -->
  <line x1="160" y1="390" x2="160" y2="490" stroke="#5cb85c" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="400" y1="390" x2="400" y2="490" stroke="#5cb85c" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="640" y1="390" x2="640" y2="490" stroke="#5cb85c" stroke-width="2" stroke-dasharray="5,3" />

  <!-- LLM User Box -->
  <rect x="50" y="560" width="700" height="30" rx="5" ry="5" fill="#f2e6ff" stroke="#9933cc" stroke-width="2" />
  <text x="400" y="580" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#9933cc">OpenWebUI + LLM: Natural Language Interface</text>
  
  <!-- Connection lines from OpenWebUI Tools to LLM User -->
  <line x1="160" y1="520" x2="160" y2="560" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="400" y1="520" x2="400" y2="560" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="640" y1="520" x2="640" y2="560" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,3" />
</svg>
